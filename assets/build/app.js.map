{"version":3,"sources":["../src/app.jsx"],"names":[],"mappings":";;;;;;;;;;;;AAAA,IAAM,eAAe,GAAG,CAAC,YAAW;AAClC,MAAM,QAAQ,GAAG;AACf,SAAK,EAAE,mBAAmB;AAC1B,eAAW,EAAE,gRAAgR;AAC7R,UAAM,EAAE,kCAAkC;AAC1C,eAAW,EAAE,iBAAiB;AAC9B,YAAQ,EAAE,yCAAyC;GACpD,CAAC;;AAEF,MAAM,IAAI,GAAG;AACX,SAAK,EAAE,EAAE;AACT,MAAE,EAAE,EAAE;AACN,QAAI,EAAE,EAAE;GACT,CAAC;;AAEF,MAAM,iBAAiB,GAAG;AACxB,SAAK,EAAE,CAAC,OAAO,EAAE,GAAG,CAAC;AACrB,aAAS,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC;AAC9B,aAAS,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC;AAC9B,SAAK,EAAE,CAAC,OAAO,EAAE,GAAG,CAAC;AACrB,aAAS,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC;AAC9B,aAAS,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC;AAC9B,QAAI,EAAE,CAAC,MAAM,EAAE,GAAG,CAAC;AACnB,QAAI,EAAE,CAAC,MAAM,EAAE,GAAG,CAAC;GACpB,CAAC;;AAEF,WAAS,wBAAwB,GAAG;AAClC,QAAI,MAAM,GAAG,EAAE,CAAC;;AAEhB,SAAI,IAAI,CAAC,IAAI,iBAAiB,EAAE;AAC9B,UAAG,iBAAiB,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;AACtC,cAAM,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;OAC9C;KACF;;AAED,WAAO,MAAM,CAAC;GACf;;;AAAA,AAGD,WAAS,eAAe,CAAC,IAAI,EAAE;AAC3B,QAAI,OAAO,IAAI,IAAI,QAAQ,EAAE;AACxB,UAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;KAC9C;AACD,QAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AAC/E,WAAO,IAAI,CAAC,OAAO,CAAC,wGAAwG,EAAE,UAAU,KAAK,EAAE;AAC3I,UAAI,GAAG,GAAG,QAAQ,CAAC;AACnB,UAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AAClB,YAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AAClB,aAAG,GAAG,KAAK,CAAC;SACf,MAAM;AACH,aAAG,GAAG,QAAQ,CAAC;SAClB;OACJ,MAAM,IAAI,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AACjC,WAAG,GAAG,SAAS,CAAC;OACnB,MAAM,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AAC3B,WAAG,GAAG,MAAM,CAAC;OAChB;AACD,aAAO,eAAe,GAAG,GAAG,GAAG,IAAI,GAAG,KAAK,GAAG,SAAS,CAAC;KAC3D,CAAC,CAAC;GACN,CAAC;;MAEI,UAAU;aAAV,UAAU;4BAAV,UAAU;;;iBAAV,UAAU;;2BACT,OAAO,EAAE,MAAK,EAAE,QAAQ,EAAE;AAC7B,SAAC,CAAC,IAAI,CAAC;AACL,aAAG,EAAE,OAAO;AACZ,eAAK,EAAE,eAAS,MAAM,EAAE;AACtB,kBAAK,CAAC,MAAM,CAAC,CAAC;WACf;AACD,iBAAO,EAAE,iBAAS,IAAI,EAAE;AACtB,oBAAQ,CAAC,IAAI,CAAC,CAAA;WACf;SACF,CAAC,CAAC;OACJ;;;2BACI,IAAI,EAAE;AACT,YAAM,cAAc,GAAG,WAAW,CAAC;;AAEnC,YAAI,iBAAiB,GAAG,SAApB,iBAAiB,CAAI,IAAI,EAAK;;;;;;;AAOhC,cAAI,MAAM,GAAG,EAAE,CAAC;;AAEhB,WAAC,CAAC,OAAO,CAAC,IAAI,EAAE,UAAC,CAAC,EAAK;AACrB,gBAAG,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;AACzB,kBAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,CACvB,MAAM,CAAC,UAAS,EAAE,EAAE;AAAC,uBAAO,EAAE,CAAC,MAAM,IAAI,CAAC,CAAA;eAAC,CAAC,CAAC;;AAEvD,oBAAM,CAAC,IAAI,CAAC;AACV,kBAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB,oBAAI,EAAE,CAAC,CAAC,CAAC,CAAC;eACX,CAAC,CAAC;aACJ;WACF,CAAC,CAAC;;AAEH,iBAAO,MAAM,CAAC;SACf,CAAA;;AAED,YAAI,iBAAiB,GAAG,SAApB,iBAAiB,CAAI,IAAI,EAAK;AAChC,cAAI,MAAM,GAAG,EAAE,CAAC;AAChB,cAAM,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;;AAExC,WAAC,CAAC,OAAO,CAAC,GAAG,EAAE,UAAC,EAAE,EAAK;AACrB,gBAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,IAAI,EAAG,EAAE,EAAC,CAAC,CAAC;AACtC,gBAAM,UAAU,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;AAEhD,kBAAM,CAAC,IAAI,CAAC;AACV,gBAAE,EAAE,EAAE;AACN,kBAAI,EAAE,UAAU;aACjB,CAAC,CAAC;WACJ,CAAC,CAAC;;AAEH,iBAAO,MAAM,CAAC;SACf,CAAA;;AAED,YAAI,eAAe,GAAG,SAAlB,eAAe,CAAI,IAAI,EAAK;AAC9B,cAAI,MAAM,GAAG,EAAE,CAAC;AAChB,cAAM,IAAI,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;AACrC,cAAM,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;;AAExC,WAAC,CAAC,OAAO,CAAC,GAAG,EAAE,UAAC,EAAE,EAAK;AACrB,gBAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,IAAI,EAAG,EAAE,EAAC,CAAC,CAAC;;AAEtC,kBAAM,CAAC,IAAI,CAAC;AACT,gBAAE,EAAE,EAAE;AACN,mBAAK,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC;aAC3B,CAAC,CAAC;WACJ,CAAC,CAAC;;AAEH,iBAAO,MAAM,CAAC;SACf,CAAA;;AAED,YAAI,mBAAmB,GAAG,SAAtB,mBAAmB,CAAI,IAAI,EAAE,WAAW,EAAK;AAC/C,cAAI,MAAM,GAAG,EAAE,CAAC;AAChB,cAAM,MAAM,GAAG,eAAe,CAAC,IAAI,CAAC,CAAC;;AAErC,WAAC,CAAC,OAAO,CAAC,MAAM,EAAE,UAAC,CAAC,EAAK;;;;AAIvB,gBAAI,IAAI,GAAG;AACT,gBAAE,EAAE,CAAC,CAAC,EAAE;AACR,kBAAI,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,IAAI,EAAE;aAC7B,CAAC;;AAEF,aAAC,CAAC,KAAK,CAAC,GAAG,CAAC,UAAC,EAAE,EAAK;AAClB,kBAAG,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE;AACxB,oBAAM,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;AAE/B,oBAAI,eAAe,YAAA,CAAC;;AAEpB,oBAAG,WAAW,KAAK,SAAS,EAAE;AAC5B,iCAAe,GAAG,WAAW,CAAC,KAAK,EAAE,EAAE,CAAC,OAAO,CAAI,KAAK,QAAK,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;iBAC1E;;AAED,oBAAG,eAAe,KAAK,SAAS,IAAI,EAAE,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE;AACxD,sBAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,OAAO,CAAI,KAAK,QAAK,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AAAE,2BAAO,CAAC,CAAC,IAAI,EAAE,CAAC;mBAAE,CAAC,CAAC;iBAC9F,MAAM;AACL,sBAAI,CAAC,KAAK,CAAC,GAAG,eAAe,CAAC;iBAC/B;eACF;aACF,CAAC,CAAC;;AAEH,kBAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;WACnB,CAAC,CAAC;;AAEH,iBAAO,MAAM,CAAC;SACf,CAAA;;AAED,YAAI,QAAQ,GAAG,SAAX,QAAQ,CAAI,IAAI,EAAK;AACvB,iBAAO,iBAAiB,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC;SACnD,CAAC;;AAEF,YAAI,YAAY,GAAG,SAAf,YAAY,CAAI,IAAI,EAAK;;;;;;;;;;;;AAY3B,cAAM,IAAI,GAAG,iBAAiB,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC;AACxD,cAAI,QAAQ,GAAG,EAAE,CAAC;;AAElB,WAAC,CAAC,OAAO,CAAC,IAAI,EAAE,UAAC,CAAC,EAAK;AACrB,oBAAQ,CAAC,IAAI,CAAC;AACZ,gBAAE,EAAE,CAAC,CAAC,EAAE;AACR,mBAAK,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AAAE,uBAAO,CAAC,CAAC,IAAI,EAAE,CAAC;eAAE,CAAC;aAC1D,CAAC,CAAC;WACJ,CAAC,CAAC;;AAEH,iBAAO,QAAQ,CAAC;SACjB,CAAA;;AAED,YAAI,SAAS,GAAG,SAAZ,SAAS,CAAI,IAAI,EAAK;;;;;;;;;;;;;;AAcxB,iBAAO,mBAAmB,CAAC,IAAI,EAAE,UAAC,KAAK,EAAE,IAAI,EAAK;AAChD,gBAAG,KAAK,KAAK,UAAU,IAAI,KAAK,KAAK,MAAM,EAAE;AAC3C,qBAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AAAE,uBAAO,MAAM,CAAC,CAAC,CAAC,CAAC;eAAE,CAAC,CAAC;aAC1D;WACF,CAAC,CAAC;SACJ,CAAA;;AAED,YAAI,WAAW,GAAG,SAAd,WAAW,CAAI,IAAI,EAAK;;;;;;;;;;;AAW1B,iBAAO,mBAAmB,CAAC,IAAI,EAAE,UAAC,KAAK,EAAE,IAAI,EAAK;AAChD,gBAAG,KAAK,KAAK,UAAU,IAAI,KAAK,KAAK,MAAM,EAAE;AAC3C,qBAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AAAE,uBAAO,MAAM,CAAC,CAAC,CAAC,CAAC;eAAE,CAAC,CAAC;aAC1D;WACF,CAAC,CAAC;SACJ,CAAA;;AAED,YAAI,YAAY,GAAG,SAAf,YAAY,CAAI,IAAI,EAAK;;;;;;;AAO3B,iBAAO,mBAAmB,CAAC,IAAI,EAAE,UAAC,KAAK,EAAE,IAAI,EAAK;AAChD,gBAAG,KAAK,KAAK,OAAO,EAAE;AACpB,qBAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AAAE,uBAAO,MAAM,CAAC,CAAC,CAAC,CAAC;eAAE,CAAC,CAAC;aAC1D;WACF,CAAC,CAAC;SACJ,CAAA;;AAED,YAAI,WAAW,GAAG,SAAd,WAAW,CAAI,IAAI,EAAK;;;;;;;;;;;;;AAa1B,iBAAO,mBAAmB,CAAC,IAAI,EAAE,UAAC,KAAK,EAAE,IAAI,EAAK;AAChD,gBAAG,KAAK,KAAK,UAAU,IAAI,KAAK,KAAK,MAAM,EAAE;AAC3C,qBAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AAAE,uBAAO,MAAM,CAAC,CAAC,CAAC,CAAC;eAAE,CAAC,CAAC;aAC1D,MAAM,IAAI,KAAK,KAAK,UAAU,EAAE;AAC/B,kBAAI,OAAM,GAAG,KAAK,CAAC;;AAEnB,kBAAG,IAAI,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;AAChD,uBAAM,GAAG,IAAI,CAAC;eACf,MAAM,IAAG,IAAI,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE;AACxD,uBAAM,GAAG,KAAK,CAAC;eAChB;AACD,qBAAO,OAAM,CAAC;aACf;WACF,CAAC,CAAC;SACJ,CAAA;;AAED,YAAI,SAAS,GAAG,SAAZ,SAAS,CAAI,IAAI,EAAK;AACxB,iBAAO,iBAAiB,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AACxC,mBAAO;AACL,gBAAE,EAAE,CAAC,CAAC,EAAE;AACR,mBAAK,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AAAE,uBAAO,MAAM,CAAC,CAAC,CAAC,CAAC;eAAE,CAAC;aAC3D,CAAA;WACF,CAAC,CAAC;SACJ,CAAA;;AAED,YAAI,UAAU,GAAG,SAAb,UAAU,CAAI,IAAI,EAAK;AACzB,iBAAO,mBAAmB,CAAC,IAAI,EAAE,UAAC,KAAK,EAAE,IAAI,EAAK;AAChD,gBAAG,KAAK,KAAK,OAAO,EAAE;AACpB,qBAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AAAE,uBAAO,MAAM,CAAC,CAAC,CAAC,CAAC;eAAE,CAAC,CAAC;aAC1D,MAAM,IAAI,KAAK,KAAK,aAAa,IACvB,KAAK,KAAK,KAAK,IACf,KAAK,KAAK,WAAW,EAAE;AAChC,qBAAO,MAAM,CAAC,IAAI,CAAC,CAAC;aACrB;WACF,CAAC,CAAC;SACJ,CAAA;;AAED,YAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,UAAC,EAAE,EAAK;AAAC,iBAAO,EAAE,CAAC,MAAM,IAAI,CAAC,CAAA;SAAC,CAAC,CAAC;AACvE,YAAM,IAAI,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,IAAI,EAAE,CAAC;;AAElC,YAAI,MAAM,GAAG;AACX,cAAI,EAAE,IAAI;SACX,CAAC;;AAEF,YAAG,IAAI,KAAK,MAAM,EAAE;AAClB,gBAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;SAC/B,MAAM,IAAI,IAAI,KAAK,UAAU,EAAE;AAC9B,gBAAM,CAAC,IAAI,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC;SACnC,MAAM,IAAI,IAAI,KAAK,OAAO,EAAE;AAC3B,gBAAM,CAAC,IAAI,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;SAChC,MAAM,IAAI,IAAI,KAAK,SAAS,EAAE;AAC7B,gBAAM,CAAC,IAAI,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;SAClC,MAAM,IAAI,IAAI,KAAK,UAAU,EAAE;AAC9B,gBAAM,CAAC,IAAI,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC;SACnC,MAAM,IAAI,IAAI,KAAK,SAAS,EAAE;AAC7B,gBAAM,CAAC,IAAI,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;SAClC,MAAM,IAAI,IAAI,KAAK,OAAO,EAAE;AAC3B,gBAAM,CAAC,IAAI,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;SAChC,MAAM,IAAI,IAAI,KAAK,QAAQ,EAAE;AAC5B,gBAAM,CAAC,IAAI,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;SACjC,MAAM;AACL,gBAAM,CAAC,IAAI,GAAG,EAAE,CAAC;SAClB;;AAED,eAAO,MAAM,CAAC;OACf;;;WA9QG,UAAU;;;MAiRV,OAAO;cAAP,OAAO;;aAAP,OAAO;4BAAP,OAAO;;oEAAP,OAAO;;;iBAAP,OAAO;;+BACF;AACP,YAAM,SAAS,GAAG;AAChB,yBAAe,EAAE,MAAM;AACvB,kBAAQ,EAAE,OAAO;AACjB,aAAG,EAAE,GAAG;AACR,eAAK,EAAE,MAAM;AACb,qBAAW,EAAE,MAAM;SACpB,CAAC;;AAEF,YAAM,UAAU,GAAG;AACjB,yBAAe,EAAE,MAAM;AACvB,eAAK,EAAE,MAAM;AACb,sBAAY,EAAE,MAAM;SACrB,CAAC;;AAEF,YAAM,SAAS,GAAG;AAChB,yBAAe,EAAE,MAAM;AACvB,eAAK,EAAE,MAAM;SACd,CAAC;;AAEF,YAAM,UAAU,GAAG;AACjB,yBAAe,EAAE,MAAM;AACvB,eAAK,EAAE,MAAM;AACb,eAAK,EAAE,MAAM;AACb,kBAAQ,EAAE,UAAU;SACrB,CAAC;;AAEF,YAAI,SAAS,GAAG,EAAE,CAAC;AACnB,YAAG,AAAC,IAAI,CAAC,KAAK,CAAC,KAAK,KAAK,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,IAC7D,IAAI,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,AAAC,EAAE;AAC7D,mBAAS,GAAG,KAAK,CAAC;SACnB;;AAEJ,eACE;;YAAK,EAAE,EAAC,MAAM,EAAC,KAAK,EAAE,SAAS,AAAC;UAC9B;;cAAM,EAAE,EAAC,OAAO,EAAC,KAAK,EAAE,UAAU,AAAC;YAAE,IAAI,CAAC,KAAK,CAAC,KAAK;;YAAG,SAAS;WAAQ;UACzE;;cAAM,EAAE,EAAC,MAAM,EAAC,KAAK,EAAE,SAAS,AAAC;YAAE,IAAI,CAAC,KAAK,CAAC,IAAI;WAAQ;UAC1D;;cAAM,EAAE,EAAC,OAAO,EAAC,KAAK,EAAE,UAAU,AAAC;YAAE,IAAI,CAAC,KAAK,CAAC,KAAK;WAAQ;SACzD,CACN;OACH;;;WAzCG,OAAO;KAAS,KAAK,CAAC,SAAS;;MA4C/B,YAAY;cAAZ,YAAY;;AAChB,aADI,YAAY,GACF;4BADV,YAAY;;0EAAZ,YAAY;;AAGd,aAAK,mBAAmB,GAAG,OAAK,mBAAmB,CAAC,IAAI,QAAM,CAAC;AAC/D,aAAK,KAAK,GAAG;AACX,oBAAY,EAAE,CAAC,CAAC;AAChB,uBAAe,EAAE,EAAE;OACpB,CAAC;;KACH;;iBARG,YAAY;;0CASI;;;AAGlB,YAAM,YAAY,GAAG,CAAC,CAAC,cAAc,CAAC;;;;;;;;AAAC,AAQvC,YAAI,CAAC,QAAQ,CAAC,EAAE,WAAW,EAAE,YAAY,EAAE,CAAC,CAAC;;AAE7C,iBAAS,kBAAkB,GAAG;AAC5B,sBAAY,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,CAAC;SAC5C;;AAED,0BAAkB,EAAE,CAAC;;AAErB,SAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,UAAC,CAAC,EAAK;AACtB,4BAAkB,EAAE,CAAC;SACtB,CAAC,CAAC;OACJ;;;0CACmB,CAAC,EAAE;;;AACrB,YAAG,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,EAAE,EAAE;;AACtB,gBAAI,YAAY,GAAG,AAAC,OAAK,KAAK,CAAC,YAAY,KAAK,CAAC,CAAC,GAC9B,OAAK,KAAK,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,GACrC,EAAE,OAAK,KAAK,CAAC,YAAY,CAAC;;AAE9C,gBAAG,YAAY,GAAG,CAAC,EAAE;AACnB,0BAAY,GAAG,CAAC,CAAC;aAClB;;AAED,mBAAK,QAAQ,CAAC,EAAE,YAAY,EAAE,YAAY,EAAC,EAAE,YAAW;AACtD,kBAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC,CAAC;aACtE,CAAC,CAAC;;SAEJ,MAAM,IAAI,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,IAAI,EAAE;;AAChC,gBAAI,YAAY,GAAG,AAAC,OAAK,KAAK,CAAC,YAAY,KAAK,CAAC,CAAC,GAAI,CAAC,GAAG,EAAE,OAAK,KAAK,CAAC,YAAY,CAAC;;AAEpF,gBAAG,YAAY,GAAG,OAAK,KAAK,CAAC,eAAe,CAAC,MAAM,EAAE;AACnD,0BAAY,GAAG,OAAK,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC;aAClD;;AAED,mBAAK,QAAQ,CAAC,EAAE,YAAY,EAAE,YAAY,EAAE,EAAE,YAAW;AACvD,kBAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC,CAAC;aACtE,CAAC,CAAC;;SAEJ,MAAM,IAAG,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,EAAE;;AAChC,gBAAM,WAAW,GAAG,OAAK,KAAK,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;AACjD,gBAAG,EAAE,WAAW,CAAC,MAAM,GAAG,CAAC,CAAA,AAAC,EAAE;;gBAAO;;AAErC,mBAAK,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;;AAE/B,mBAAK,QAAQ,CAAC;AACZ,6BAAe,EAAE,CAAC,CAAC,IAAI,CAAC,OAAK,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;AACzE,0BAAY,EAAE,CAAC,CAAC;aACjB,EAAE,YAAW;AACZ,kBAAG,IAAI,CAAC,KAAK,CAAC,UAAU,KAAK,SAAS,EAAE;AACtC,oBAAI,CAAC,KAAK,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;eACpC;aACF,CAAC,CAAC;;;;SACJ;OACF;;;+BACQ;AACP,YAAM,qBAAqB,GAAG;AAC5B,qBAAW,EAAE,MAAM;SACpB,CAAC;;AAEF,YAAM,cAAc,GAAG;AACrB,gBAAM,EAAE,MAAM;AACd,iBAAO,EAAE,MAAM;AACf,qBAAW,EAAE,KAAK;SACnB,CAAC;;AAEF,eACE;;YAAK,EAAE,EAAC,kBAAkB,EAAC,KAAK,EAAE,qBAAqB,AAAC;;UAClD,+BAAO,EAAE,EAAC,aAAa,EAAC,KAAK,EAAE,cAAc,AAAC,EAAC,IAAI,EAAC,MAAM,EAAC,OAAO,EAAE,IAAI,CAAC,mBAAmB,AAAC,EAAC,SAAS,MAAA,GAAG;SAC1G,CACN;OACH;;;WAzFG,YAAY;KAAS,KAAK,CAAC,SAAS;;MA4FpC,MAAM;cAAN,MAAM;;AACV,aADI,MAAM,GACI;4BADV,MAAM;;0EAAN,MAAM;;AAGR,aAAK,gBAAgB,GAAG,OAAK,gBAAgB,CAAC,IAAI,QAAM,CAAC;;AAEzD,UAAM,cAAc,GAAG,CACrB;AACE,gBAAQ,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC;AACzB,YAAI,EAAE,CAAA,UAAS,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;AACxC,cAAI,KAAK,GAAG,EAAE,CAAC;AACf,cAAI,OAAO,GAAG,EAAE;;;;AAAC,AAIjB,eAAI,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC9C,gBAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;AAC7B,qBAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACjB;WACF;;;;AAAA,AAID,iBAAO,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AACjB,gBAAI,OAAO,GAAG,CAAC,CAAC;AAChB,iBAAI,IAAI,CAAC,IAAI,iBAAiB,EAAE;AAC9B,kBAAG,OAAO,KAAK,CAAC,EAAE;AAChB,qBAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACd,uBAAO;eACR;AACD,qBAAO,EAAE,CAAC;aACX;WACF,CAAC,CAAC;;AAEH,cAAG,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;AACnB,gBAAI,CAAC,GAAG,yCAAuC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAG,CAAC;WACpE;SACF,CAAA,CAAC,IAAI,QAAM;OACb,EACD;AACE,gBAAQ,EAAE,CAAC,WAAW,EAAE,GAAG,CAAC;AAC5B,YAAI,EAAE,CAAA,UAAS,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;AAoBxC,cAAI,CAAC,GAAG,CAAI,GAAG,oCAAiC,CAAC;SAClD,CAAA,CAAC,IAAI,QAAM;OACb,EACD;AACE,gBAAQ,EAAE,CAAC,MAAM,EAAE,GAAG,CAAC;AACvB,YAAI,EAAE,CAAA,UAAS,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;AACxC,cAAG,MAAM,CAAC,IAAI,KAAK,SAAS,EAAE;AAC5B,gBAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;WACpC;SACF,CAAA,CAAC,IAAI,QAAM;OACb,EACD;AACE,gBAAQ,EAAE,CAAC,SAAS,EAAE,GAAG,CAAC;AAC1B,YAAI,EAAE,CAAA,UAAS,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;AACxC,cAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;AAClB,gBAAG,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,KAAK,MAAM,IAChC,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,KAAK,IAAI,EAAE;AACjC,kBAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;;AAEhE,kBAAG,IAAI,KAAK,SAAS,EAAE;AACrB,oBAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,IAAI,EAAG,IAAI,CAAC,WAAW,EAAE,CAAC;;AAAC,AAEvE,oBAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;eACrB;aACF,MAAM;;;;AAIL,kBAAI,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;aACxC;WACF,MAAM;AACL,gBAAI,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;WAC1C;SACF,CAAA,CAAC,IAAI,QAAM;OACb,EACD;AACE,gBAAQ,EAAE,wBAAwB,EAAE;AACpC,YAAI,EAAE,CAAA,UAAS,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;AACxC,cAAI,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;SACd,CAAA,CAAC,IAAI,QAAM;OACb,CACF,CAAC;;AAEF,UAAM,cAAc,GAAG,CACrB;AACE,gBAAQ,EAAE,CAAC,OAAO,CAAC;AACnB,YAAI,EAAE,CAAA,UAAS,GAAG,EAAE,IAAI,EAAE;;;AAGxB,cAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AACxD,cAAI,CAAC,GAAG,+BAA6B,eAAe,CAAC,IAAI,CAAC,YAAS,CAAC;AACpE,cAAI,CAAC,GAAG,sBAAoB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAG,CAAC;SACjF,CAAA,CAAC,IAAI,QAAM;OACb,EACD;AACE,gBAAQ,EAAE,CAAC,UAAU,CAAC;AACtB,YAAI,EAAE,CAAA,UAAS,GAAG,EAAE,IAAI,EAAE;;;;;;AAIxB,cAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;AAClB,gBAAI;;AACF,oBAAI,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7C,uBAAK,GAAG,wCAAsC,eAAe,CAAC,YAAY,CAAC,YAAS,CAAC;AACrF,uBAAK,GAAG,CAAC,6BAA6B,CAAC;;;;;;AAAC,AAMxC,oBAAI,UAAU,GAAG,EAAE,CAAC;AACpB,oBAAM,KAAK,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,WAAW,CAAC,CAAC;;AAE9C,qBAAK,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AAAE,4BAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAAE,CAAC,CAAC;AAC7C,0BAAU,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;;AAEvC,oBAAG,UAAU,KAAK,SAAS,EAAE;AAC3B,4BAAU,GAAG,IAAI,CAAC;iBACnB;;AAED,oBAAG,UAAU,EAAE;AACb,yBAAK,QAAQ,CAAC;AACZ,0BAAM,EAAE,YAAY;mBACrB,EAAE,CAAA,YAAW;AACZ,wBAAI,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;mBAClD,CAAA,CAAC,IAAI,QAAM,CAAC,CAAC;iBACf,MAAM;AACL,yBAAK,GAAG,CAAC,kCAAkC,CAAC,CAAC;iBAC9C;;aACF,CAAC,OAAM,CAAC,EAAE;;AAET,kBAAI,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;aAC/C;WACF,MAAM;AACL,gBAAI,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAC;WAC9C;SAEF,CAAA,CAAC,IAAI,QAAM;OACb,EACD;AACE,gBAAQ,EAAE,CAAC,OAAO,CAAC;AACnB,YAAI,EAAE,CAAA,UAAS,GAAG,EAAE,IAAI,EAAE;AACxB,cAAI,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;SAClC,CAAA,CAAC,IAAI,QAAM;OACb,EACD;AACE,gBAAQ,EAAE,CAAC,QAAQ,CAAC;AACpB,YAAI,EAAE,CAAA,UAAS,GAAG,EAAE,IAAI,EAAE;AACxB,cAAI,IAAI,GAAG,EAAE,CAAC;;AAEd,cAAG,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;AAC7D,gBAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AACzD,gBAAI,CAAC,GAAG,sBAAoB,IAAI,CAAC,CAAC,CAAC,WAAQ,CAAC;WAC7C,MAAM;AACL,gBAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AAChD,gBAAI,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;WACtC;;AAED,cAAI,CAAC,GAAG,WAAS,eAAe,CAAC,IAAI,CAAC,YAAS,CAAC;SACjD,CAAA,CAAC,IAAI,QAAM;OACb,EACD;AACE,gBAAQ,EAAE,CAAC,QAAQ,CAAC;AACpB,YAAI,EAAE,CAAA,UAAS,GAAG,EAAE,IAAI,EAAE;AACxB,cAAI,CAAC,KAAK,EAAE,CAAC;SACd,CAAA,CAAC,IAAI,QAAM;OACb,EACD;AACE,gBAAQ,EAAE,CAAC,UAAU,CAAC;AACtB,YAAI,EAAE,CAAA,UAAS,GAAG,EAAE,IAAI,EAAE;AACxB,cAAI,CAAC,KAAK,EAAE,CAAC;AACb,cAAI,CAAC,SAAS,EAAE,CAAC;SAClB,CAAA,CAAC,IAAI,QAAM;OACb,EACD;AACE,gBAAQ,EAAE,CAAC,MAAM,EAAC,GAAG,CAAC;AACtB,YAAI,EAAE,CAAA,UAAS,GAAG,EAAE,IAAI,EAAE;AACxB,cAAM,IAAI,GAAG,CACX,2EAA2E,EAC3E,2EAA2E,EAC3E,oEAAoE,EACpE,mCAAmC,EACnC,qCAAqC,EACrC,sCAAsC,EACtC,6CAA6C,EAC7C,6DAA6D,EAC7D,+EAA+E,EAC/E,2DAA2D,EAC3D,0KAA0K,CAC3K,CAAC;;AAEF,cAAI,CAAC,GAAG,gCAA8B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAgB,CAAC;SAC1E,CAAA,CAAC,IAAI,QAAM;OACb,CACF,CAAC;;AAEF,aAAK,KAAK,GAAG;AACX,sBAAc,EAAE,cAAc;AAC9B,sBAAc,EAAE,cAAc;;;AAG9B,gBAAQ,EAAE,EAAE;AACZ,aAAK,EAAE,CAAC;OACT,CAAA;;KACF;;iBAhOG,MAAM;;yCAiOS;AACjB,eAAO;AACL,eAAK,EAAE,CAAC;AACR,cAAI,EAAE,EAAE;AACR,mBAAS,EAAE,EAAE;AAAA,SACd,CAAA;OACF;;;0CACmB;AAClB,SAAC,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;OACpE;;;8BACO;AACN,YAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;OAC7B;;;mCACY,OAAO,EAAE;AACpB,YAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,GAAG,OAAO,GAAG,OAAO,CAAC,CAAC;OAC3D;;;0BACG,IAAI,EAAkB;YAAhB,OAAO,yDAAG,IAAI;;AACtB,YAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;AAClB,cAAI,MAAM,GAAG,EAAE,CAAC;AAChB,cAAG,OAAO,EAAE;AACV,kBAAM,GAAG,MAAM,CAAC;WACjB;AACD,cAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC;AACzC,cAAI,CAAC,iBAAiB,EAAE,CAAC;SAC1B;OACF;;;kCACW,EAAE,EAAE;AACd,YAAM,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;AAChE,YAAG,QAAQ,KAAK,SAAS,EAAE;AACzB,iBAAO,QAAQ,CAAC,KAAK,CAAC;SACvB,MAAM;AACL,iBAAO,EAAE,CAAC;SACX;OACF;;;+BACQ,EAAE,EAAE;AACX,YAAM,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,IAAI,EAAG,EAAE,EAAE,CAAC,CAAC;AAC3D,YAAG,KAAK,KAAK,SAAS,EAAE;AACtB,iBAAO,KAAK,CAAC,KAAK,CAAC;SACpB;OACF;;;iCACU,EAAE,EAAE;;OAEd;;;kCACW,EAAE,EAAE;;OAEf;;;iCACU,EAAE,EAAE;;OAEd;;;8BACO,EAAE,EAAE;AACV,YAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,IAAI,EAAG,EAAE,EAAE,CAAC,CAAC;AACzD,YAAG,IAAI,KAAK,SAAS,EAAE;AACrB,iBAAO,IAAI,CAAC;SACb,MAAM;AACL,iBAAO,EAAE,CAAC;SACX;OACF;;;8BACO,EAAE,EAAE;;;AACV,YAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,IAAI,EAAG,EAAE,EAAE,CAAC,CAAC;;AAE1D,YAAG,IAAI,KAAK,SAAS,EAAE;AACrB,iBAAO;AACL,cAAE,EAAE,EAAE;AACN,gBAAI,EAAE,IAAI,CAAC,IAAI;AACf,oBAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AAAE,qBAAO,OAAK,WAAW,CAAC,CAAC,CAAC,CAAC;aAAE,CAAC,CAAC,CAAC;AACtF,gBAAI,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAC,CAAC,EAAK;AAAE,qBAAO,OAAK,OAAO,CAAC,CAAC,CAAC,CAAC;aAAE,CAAC;AACvD,iBAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC;WACzB,CAAC;SACH;OACF;;;kCACW;AACV,YAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;AAChE,YAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC;;;;;AAAC,AAKlD,YAAG,YAAY,KAAK,SAAS,EAAE;AAC7B,cAAI,MAAM,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;AACrC,gBAAM,CAAC,IAAI,GAAG,YAAY,CAAC;;AAE3B,cAAI,CAAC,QAAQ,CAAC;AACZ,kBAAM,EAAE,MAAM;AACd,oBAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI;WAC3B,EAAE,CAAA,YAAW;AACZ,gBAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AAC/B,gBAAI,CAAC,GAAG,cAAY,QAAQ,CAAC,MAAM,2BAAsB,QAAQ,CAAC,WAAW,CAAG,CAAC;AACjF,gBAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;;AAEhB,gBAAI,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;WACrC,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SACf;OACF;;;iCACU,OAAO,EAAE;AAClB,YAAI,MAAM,GAAG,EAAE,CAAC;AAChB,YAAI,YAAY,GAAG,KAAK,CAAC;AACzB,YAAI,KAAK,GAAG,SAAR,KAAK,CAAI,GAAG,EAAK;AAAE,gBAAM,GAAG,GAAG,CAAC;SAAE,CAAC;AACvC,YAAI,MAAM,GAAG,SAAT,MAAM,CAAI,QAAQ,EAAE,WAAW,EAAE,KAAK,EAAK;AAC7C,cAAG,MAAM,KAAK,EAAE,EAAE;AAChB,aAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,UAAC,GAAG,EAAK;AAC3B,kBAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE;AACxC,4BAAY,GAAG,IAAI,CAAC;;AAEpB,qBAAK,CAAC;AACJ,6BAAW,EAAE,WAAW;AACxB,yBAAO,EAAE,GAAG;iBACb,CAAC,CAAC;;AAEH,uBAAO,KAAK,CAAC;eACd;aACF,CAAC,CAAC;WACJ;SACF,CAAC;;AAEF,cAAM,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;AACnD,cAAM,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,QAAQ,EAAE,KAAK,CAAC;;;AAAC,AAGnD,YAAG,CAAC,YAAY,EAAE;AAChB,cAAI,CAAC,GAAG,0BAAwB,OAAO,CAAG,CAAC;SAC5C;;AAED,eAAO,MAAM,CAAC;OACf;;;4CACqB,IAAI,EAAE;;;;;;;;;;;OAW3B;;;yBACE,SAAS,EAAE;;;;;;;;;;;;;;;AAaZ,YAAI,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,iBAAiB,EAAE,UAAC,EAAE,EAAK;AACjD,iBAAO,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;SACnC,CAAC,CAAC;;AAEH,YAAG,OAAO,KAAK,SAAS,EAAE;;;AAExB,gBAAI,KAAK,GAAG,CAAC,CAAC;;AAEd,iBAAI,IAAI,CAAC,IAAI,iBAAiB,EAAE;AAC9B,kBAAG,CAAC,KAAK,OAAO,EAAE;AAChB,sBAAM;eACP;AACD,mBAAK,EAAE,CAAC;aACT;;;;AAAA,AAID,gBAAI,OAAO,GAAG,OAAK,OAAO,CAAC,OAAK,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;;AAEhE,gBAAG,OAAO,KAAK,SAAS,EAAE;;AAExB,qBAAK,KAAK,CAAC,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC;;AAEjC,qBAAK,QAAQ,CAAC;AACZ,wBAAQ,EAAE,OAAK,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI;eACtC,EAAE,YAAM;AACP,uBAAK,GAAG,CAAC,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACrC,uBAAK,GAAG,CAAC,OAAK,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;;AAAC,eAE/C,CAAC,CAAC;aACJ,MAAM;AACL,uBAAK,GAAG,CAAC,gCAAgC,CAAC;;AAAC,eAE5C;;SACF;OACF;;;uCACgB,OAAO,EAAE;AACxB,YAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;;AAE3B,YAAI,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC/B,YAAI,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACnB,YAAI,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;AAE1B,YAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;;AAEpC,YAAG,MAAM,CAAC,WAAW,KAAK,SAAS,EAAE;AACnC,cAAG,MAAM,CAAC,WAAW,KAAK,QAAQ,EAAE;AAClC,kBAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;WACzE,MAAM,IAAI,MAAM,CAAC,WAAW,KAAK,QAAQ,EAAE;AAC1C,kBAAM,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;WAChC;SACF;;AAED,YAAI,CAAC,iBAAiB,EAAE,CAAC;OAC1B;;;0CACmB;AAClB,YAAI,CAAC,QAAQ,CAAC;AACZ,iBAAO,EAAE,CAAC,CAAC,UAAU,CAAC;AACtB,cAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI;AACrB,gBAAM,EAAE,IAAI,CAAC,gBAAgB,EAAE;AAC/B,mBAAS,EAAE;;;AAGT,eAAG,EAAE,CAAA,UAAS,IAAI,EAAE,OAAO,EAAE;AAC5B,kBAAI,CAAC,GAAG,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;aACxB,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC;WACb;SACF,EAAE,YAAW;AACZ,cAAI,CAAC,SAAS,EAAE,CAAC;SAClB,CAAC,CAAC;OACJ;;;+BACQ;AACP,YAAM,YAAY,GAAG;AACnB,mBAAS,EAAE,MAAM;AACjB,oBAAU,EAAE,MAAM;SACnB,CAAC;;AAEF,eACE;;;UACE,oBAAC,OAAO,IAAC,KAAK,EAAE,QAAQ,CAAC,KAAK,AAAC;AACtB,gBAAI,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,AAAC;AAC1B,iBAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,AAAC,GAAG;UACpC,6BAAK,EAAE,EAAC,SAAS,EAAC,KAAK,EAAE,YAAY,AAAC,GAAO;UAC7C,oBAAC,YAAY,IAAC,UAAU,EAAE,IAAI,CAAC,gBAAgB,AAAC,GAAG;SAC/C,CACN;OACH;;;WA5cG,MAAM;KAAS,KAAK,CAAC,SAAS;;AA+cpC,SAAO;AACL,QAAI,EAAE,gBAAW;AACf,UAAI,EAAE,GAAG,IAAI,UAAU,EAAE,CAAC;;AAE1B,QAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EACvB,UAAC,MAAM,EAAK;AAAE,eAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;OAAE,EACpC,UAAC,IAAI,EAAK;AACR,YAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;;;AAAC,AAGrC,YAAI,KAAK,GAAG,EAAE,CAAC;;AAEf,SAAC,CAAC,OAAO,CAAC,SAAS,EAAE,UAAC,EAAE,EAAK;AAC3B,cAAM,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAC3B,eAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC;SAClC,CAAC;;;;;;AAAC,AAMH,gBAAQ,CAAC,MAAM,CAAC,oBAAC,MAAM,IAAC,IAAI,EAAE,KAAK,AAAC,GAAG,EAAE,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;OACzE,CAAC,CAAC;KACN;GACF,CAAA;CACF,CAAA,EAAG,CAAC;;AAEL,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,YAAW;AAC3B,iBAAe,CAAC,IAAI,EAAE,CAAC;CACxB,CAAC,CAAC","file":"app.js","sourcesContent":["const CloakOfDarkness = (function() {\r\n  const gameInfo = {\r\n    title: \"Cloak of Darkness\",\r\n    description: \"Welcome, Cloak of Darkness is an implementation of the de facto 'Hello, World' of interactive  fiction by the same name. If you want to find out what a 'Cloak of Darkness' is you can find out more <a href='http://www.firthworks.com/roger/cloak' target='_blank'>here</a>.\",\r\n    author: \"Frank Hale <frankhale@gmail.com>\",\r\n    releaseDate: \"8 November 2015\",\r\n    dataFile: \"/assets/data/cloak-of-darkness-data.txt\"\r\n  };\r\n\r\n  const keys = {\r\n    Enter: 13,\r\n    Up: 38,\r\n    Down: 40\r\n  };\r\n\r\n  const directionSynonyms = {\r\n    north: [\"north\", \"n\"],\r\n    northEast: [\"northeast\", \"ne\"],\r\n    northWest: [\"northwest\", \"nw\"],\r\n    south: [\"south\", \"s\"],\r\n    southEast: [\"southeast\", \"se\"],\r\n    southWest: [\"southwest\", \"sw\"],\r\n    east: [\"east\", \"e\"],\r\n    west: [\"west\", \"w\"]\r\n  };\r\n\r\n  function flattenDirectionSynonyms() {\r\n    let result = [];\r\n\r\n    for(let p in directionSynonyms) {\r\n      if(directionSynonyms.hasOwnProperty(p)) {\r\n        result = result.concat(directionSynonyms[p]);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  // borrowed from: http://stackoverflow.com/a/7220510/170217\r\n  function syntaxHighlight(json) {\r\n      if (typeof json != 'string') {\r\n           json = JSON.stringify(json, undefined, 2);\r\n      }\r\n      json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n      return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\r\n          let cls = 'number';\r\n          if (/^\"/.test(match)) {\r\n              if (/:$/.test(match)) {\r\n                  cls = 'key';\r\n              } else {\r\n                  cls = 'string';\r\n              }\r\n          } else if (/true|false/.test(match)) {\r\n              cls = 'boolean';\r\n          } else if (/null/.test(match)) {\r\n              cls = 'null';\r\n          }\r\n          return '<span class=\"' + cls + '\">' + match + '</span>';\r\n      });\r\n  };\r\n\r\n  class DataLoader {\r\n    load(dataUrl, error, complete) {\r\n      $.ajax({\r\n        url: dataUrl,\r\n        error: function(status) {\r\n          error(status);\r\n        },\r\n        success: function(data) {\r\n          complete(data)\r\n        }\r\n      });\r\n    }\r\n    read(data) {\r\n      const idAndDataRegex = /^(\\d+)\\s+/;\r\n\r\n      let readNumberedLines = (data) => {\r\n        // Example:\r\n        //\r\n        // 1 You are in the Foyer of the Opera House. This room has doors to the\r\n        // 1 south and west, also an unusable exit to the north. The room is quiet\r\n        // 1 and you don't see anyone around.\r\n\r\n        let result = [];\r\n\r\n        _.forEach(data, (l) => {\r\n          if(idAndDataRegex.test(l)) {\r\n            const s = l.split(idAndDataRegex)\r\n                     .filter(function(el) {return el.length != 0});\r\n\r\n            result.push({\r\n              id: Number(s[0]),\r\n              text: s[1]\r\n            });\r\n          }\r\n        });\r\n\r\n        return result;\r\n      }\r\n\r\n      let joinNumberedLines = (data) => {\r\n        let result = [];\r\n        const ids = _.uniq(_.pluck(data, \"id\"));\r\n\r\n        _.forEach(ids, (id) => {\r\n          const d = _.where(data, { \"id\" : id});\r\n          const textJoined = _.pluck(d, \"text\").join(\" \");\r\n\r\n          result.push({\r\n            id: id,\r\n            text: textJoined\r\n          });\r\n        });\r\n\r\n        return result;\r\n      }\r\n\r\n      let getGroupedLines = (data) => {\r\n        let groups = [];\r\n        const temp = readNumberedLines(data);\r\n        const ids = _.uniq(_.pluck(temp, \"id\"));\r\n\r\n        _.forEach(ids, (id) => {\r\n          const d = _.where(temp, { \"id\" : id});\r\n\r\n          groups.push({\r\n             id: id,\r\n             group: _.pluck(d, \"text\")\r\n          });\r\n        });\r\n\r\n        return groups;\r\n      }\r\n\r\n      let getStructuredObject = (data, conditional) => {\r\n        let result = [];\r\n        const groups = getGroupedLines(data);\r\n\r\n        _.forEach(groups, (g) => {\r\n\r\n          //console.log(g);\r\n\r\n          let item = {\r\n            id: g.id,\r\n            name: g.group.shift().trim()\r\n          };\r\n\r\n          g.group.map((ig) => {\r\n            if(ig.indexOf(\":\") != -1) {\r\n              const gName = ig.split(\":\")[0];\r\n\r\n              let conditionalItem;\r\n\r\n              if(conditional !== undefined) {\r\n                conditionalItem = conditional(gName, ig.replace(`${gName}:`, \"\").trim());\r\n              }\r\n\r\n              if(conditionalItem === undefined && ig.startsWith(gName)) {\r\n                item[gName] = ig.replace(`${gName}:`, \"\").trim().split(\",\").map((i) => { return i.trim(); });\r\n              } else {\r\n                item[gName] = conditionalItem;\r\n              }\r\n            }\r\n          });\r\n\r\n          result.push(item);\r\n        });\r\n\r\n        return result;\r\n      }\r\n\r\n      let readText = (data) => {\r\n        return joinNumberedLines(readNumberedLines(data));\r\n      };\r\n\r\n      let readSynonyms = (data) => {\r\n        // Example:\r\n        //\r\n        // synonyms\r\n        // 1 cloak, dark cloak, velvet cloak, jacket, overcoat\r\n        // 2 hang, place, put, throw, toss\r\n        // 3 read, look, ponder, interpret, consider\r\n        // 4 message, words, inscription, sign\r\n        // 5 foyer, front room, entrance\r\n        // 6 cloak room, closet\r\n        // 7 bar\r\n\r\n        const temp = joinNumberedLines(readNumberedLines(data));\r\n        let synonyms = [];\r\n\r\n        _.forEach(temp, (s) => {\r\n          synonyms.push({\r\n            id: s.id,\r\n            words: s.text.split(\",\").map((x) => { return x.trim(); })\r\n          });\r\n        });\r\n\r\n        return synonyms;\r\n      }\r\n\r\n      let readRooms = (data) => {\r\n        // Example:\r\n        //\r\n        // rooms\r\n        // 1 Opera House Foyer\r\n        // 1 synonyms: 5\r\n        // 1 text: 1\r\n        // 2 Cloak Room\r\n        // 2 synonyms: 6\r\n        // 2 text: 2\r\n        // 3 The Bar\r\n        // 3 synonyms: 7\r\n        // 3 text: 3, 9, 11, 12\r\n\r\n        return getStructuredObject(data, (gName, data) => {\r\n          if(gName === \"synonyms\" || gName === \"text\") {\r\n            return data.split(\",\").map((n) => { return Number(n); });\r\n          }\r\n        });\r\n      }\r\n\r\n      let readActions = (data) => {\r\n        // Example:\r\n        //\r\n        // actions\r\n        // 1 hang\r\n        // 1 synonyms: 2\r\n        // 1 text: 4\r\n        // 2 read\r\n        // 2 synonyms: 3\r\n        // 2 text: 6, 7, 8\r\n\r\n        return getStructuredObject(data, (gName, data) => {\r\n          if(gName === \"synonyms\" || gName === \"text\") {\r\n            return data.split(\",\").map((n) => { return Number(n); });\r\n          }\r\n        });\r\n      }\r\n\r\n      let readTriggers = (data) => {\r\n        // Example:\r\n        //\r\n        // triggers\r\n        // 1 movement\r\n        // 1 rooms: 3\r\n\r\n        return getStructuredObject(data, (gName, data) => {\r\n          if(gName === \"rooms\") {\r\n            return data.split(\" \").map((n) => { return Number(n); });\r\n          }\r\n        });\r\n      }\r\n\r\n      let readObjects = (data) => {\r\n        // Example:\r\n        //\r\n        // objects\r\n        // 1 cloak\r\n        // 1 synonyms: 1\r\n        // 1 wearable: true\r\n        // 1 text: 13, 14\r\n        // 2 message\r\n        // 2 synonyms: 4\r\n        // 2 wearable: false\r\n        // 2  text: 15\r\n\r\n        return getStructuredObject(data, (gName, data) => {\r\n          if(gName === \"synonyms\" || gName === \"text\") {\r\n            return data.split(\",\").map((n) => { return Number(n); });\r\n          } else if (gName === \"wearable\") {\r\n            let result = false;\r\n\r\n            if(data.toLowerCase().trim().substr(\"true\") > -1) {\r\n              result = true;\r\n            } else if(data.toLowerCase().trim().substr(\"false\") > -1) {\r\n              result = false;\r\n            }\r\n            return result;\r\n          }\r\n        });\r\n      }\r\n\r\n      let readExits = (data) => {\r\n        return readNumberedLines(data).map((e) => {\r\n          return {\r\n            id: e.id,\r\n            rooms: e.text.split(\",\").map((n) => { return Number(n); })\r\n          }\r\n        });\r\n      }\r\n\r\n      let readPlayer = (data) => {\r\n        return getStructuredObject(data, (gName, data) => {\r\n          if(gName === \"items\") {\r\n            return data.split(\",\").map((n) => { return Number(n); });\r\n          } else if (gName === \"description\" ||\r\n                     gName === \"age\" ||\r\n                     gName === \"startRoom\") {\r\n            return Number(data);\r\n          }\r\n        });\r\n      }\r\n\r\n      const lines = data.split(\"\\n\").filter((el) => {return el.length != 0});\r\n      const name = lines.shift().trim();\r\n\r\n      let result = {\r\n        name: name\r\n      };\r\n\r\n      if(name === \"text\") {\r\n        result.data = readText(lines);\r\n      } else if (name === \"synonyms\") {\r\n        result.data = readSynonyms(lines);\r\n      } else if (name === \"rooms\") {\r\n        result.data = readRooms(lines);\r\n      } else if (name === \"actions\") {\r\n        result.data = readActions(lines);\r\n      } else if (name === \"triggers\") {\r\n        result.data = readTriggers(lines);\r\n      } else if (name === \"objects\") {\r\n        result.data = readObjects(lines);\r\n      } else if (name === \"exits\") {\r\n        result.data = readExits(lines);\r\n      } else if (name === \"player\") {\r\n        result.data = readPlayer(lines);\r\n      } else {\r\n        result.data = [];\r\n      }\r\n\r\n      return result;\r\n    }\r\n  }\r\n\r\n  class InfoBar extends React.Component {\r\n    render() {\r\n      const infoStyle = {\r\n        backgroundColor: \"#000\",\r\n        position: \"fixed\",\r\n        top: \"0\",\r\n        width: \"100%\",\r\n        paddingLeft: \"10px\"\r\n      };\r\n\r\n      const titleStyle = {\r\n        backgroundColor: \"#000\",\r\n        color: \"#fff\",\r\n        marginBottom: \"25px\"\r\n      };\r\n\r\n      const roomStyle = {\r\n        backgroundColor: \"#000\",\r\n        color: \"#fff\",\r\n      };\r\n\r\n      const scoreStyle = {\r\n        backgroundColor: \"#000\",\r\n        color: \"#fff\",\r\n        right: \"20px\",\r\n        position: \"absolute\"\r\n      };\r\n\r\n      let separator = \"\";\r\n      if((this.props.title !== undefined && this.props.title.length > 0) &&\r\n         (this.props.room !== undefined && this.props.room.length > 0)) {\r\n           separator = \" | \";\r\n         }\r\n\r\n      return (\r\n        <div id=\"info\" style={infoStyle}>\r\n          <span id=\"title\" style={titleStyle}>{this.props.title} {separator}</span>\r\n          <span id=\"room\" style={roomStyle}>{this.props.room}</span>\r\n          <span id=\"score\" style={scoreStyle}>{this.props.score}</span>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  class CommandInput extends React.Component {\r\n    constructor() {\r\n      super();\r\n      this.onCommandInputKeyUp = this.onCommandInputKeyUp.bind(this);\r\n      this.state = {\r\n        commandIndex: -1,\r\n        commandsEntered: []\r\n      };\r\n    }\r\n    componentDidMount() {\r\n      // Make sure the command input box width is a consistant width based on the\r\n      // width of the window.\r\n      const $commandText = $(\"#commandText\");\r\n\r\n      // this may need to be changed later if I have more rich UI's but basically\r\n      // this will make sure the command input is always focused, hopefully.\r\n      // $(commandText).on(\"blur\", () => {\r\n      //   $commandText.focus();\r\n      // });\r\n\r\n      this.setState({ commandText: $commandText });\r\n\r\n      function resizeCommandInput() {\r\n        $commandText.width(window.innerWidth - 50);\r\n      }\r\n\r\n      resizeCommandInput();\r\n\r\n      $(window).resize((e) => {\r\n        resizeCommandInput();\r\n      });\r\n    }\r\n    onCommandInputKeyUp(e) {\r\n      if(e.which === keys.Up) {\r\n        let commandIndex = (this.state.commandIndex === -1) ?\r\n                            this.state.commandsEntered.length - 1 :\r\n                            --this.state.commandIndex;\r\n\r\n        if(commandIndex < 0) {\r\n          commandIndex = 0;\r\n        }\r\n\r\n        this.setState({ commandIndex: commandIndex}, function() {\r\n          this.state.commandText.val(this.state.commandsEntered[commandIndex]);\r\n        });\r\n\r\n      } else if (e.which === keys.Down) {\r\n        let commandIndex = (this.state.commandIndex === -1) ? 0 : ++this.state.commandIndex;\r\n\r\n        if(commandIndex > this.state.commandsEntered.length) {\r\n          commandIndex = this.state.commandsEntered.length;\r\n        }\r\n\r\n        this.setState({ commandIndex: commandIndex }, function() {\r\n          this.state.commandText.val(this.state.commandsEntered[commandIndex]);\r\n        });\r\n\r\n      } else if(e.which === keys.Enter) {\r\n        const textEntered = this.state.commandText.val();\r\n        if(!(textEntered.length > 0)) return;\r\n\r\n        this.state.commandText.val(\"\");\r\n\r\n        this.setState({\r\n          commandsEntered: _.uniq(this.state.commandsEntered.concat([textEntered])),\r\n          commandIndex: -1\r\n        }, function() {\r\n          if(this.props.onKeyEnter !== undefined) {\r\n            this.props.onKeyEnter(textEntered);\r\n          }\r\n        });\r\n      }\r\n    }\r\n    render() {\r\n      const commandContainerStyle = {\r\n        paddingLeft: \"10px\"\r\n      };\r\n\r\n      const textInputStyle = {\r\n        border: \"none\",\r\n        outline: \"none\",\r\n        paddingLeft: \"2px\"\r\n      };\r\n\r\n      return (\r\n        <div id=\"commandContainer\" style={commandContainerStyle}>\r\n          &gt;<input id=\"commandText\" style={textInputStyle} type=\"text\" onKeyUp={this.onCommandInputKeyUp} autoFocus />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  class GameUI extends React.Component {\r\n    constructor() {\r\n      super();\r\n      this.onCommandEntered = this.onCommandEntered.bind(this);\r\n\r\n      const playerCommands = [\r\n        {\r\n          synonyms: [\"exits\", \"ex\"],\r\n          func: function(player, system, cmd, args) {\r\n            let exits = [];\r\n            let indices = [];\r\n\r\n            //console.log(player.room.exits);\r\n\r\n            for(var i=0; i < player.room.exits.length; i++) {\r\n              if(player.room.exits[i] !== 0) {\r\n                indices.push(i);\r\n              }\r\n            }\r\n\r\n            //console.log(indices);\r\n\r\n            indices.map((i) => {\r\n              let counter = 0;\r\n              for(let d in directionSynonyms) {\r\n                if(counter === i) {\r\n                  exits.push(d);\r\n                  return;\r\n                }\r\n                counter++;\r\n              }\r\n            });\r\n\r\n            if(exits.length > 0) {\r\n              this.say(`the following exits are available: ${exits.join(', ')}`);\r\n            }\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"inventory\", \"i\"],\r\n          func: function(player, system, cmd, args) {\r\n            // if(player.inventory.length > 0) {\r\n            //   _.forEach(player.inventory, function(i) {\r\n            //     var modifier = \"\";\r\n            //\r\n            //     if(i.type.name === \"garment\") {\r\n            //       if(i.type.worn) {\r\n            //         modifier = \"is\";\r\n            //       } else {\r\n            //         modifier = \"is not\";\r\n            //       }\r\n            //\r\n            //       this.say(i.name + \" (which \" + modifier + \" being worn)\");\r\n            //     } else {\r\n            //       this.say(i.name);\r\n            //     }\r\n            //   }.bind(this));\r\n            // } else {\r\n            //   this.say(\"Your inventory contains no items.<br/>\");\r\n            // }\r\n            this.say(`${cmd} has not yet been implemented.`);\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"look\", \"l\"],\r\n          func: function(player, system, cmd, args) {\r\n            if(player.room !== undefined) {\r\n              this.say(player.room.text[0].text);\r\n            }\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"examine\", \"x\"],\r\n          func: function(player, system, cmd, args) {\r\n            if(args.length > 0) {\r\n              if(args[0].toLowerCase() === \"self\" ||\r\n                 args[0].toLowerCase() === \"me\") {\r\n                const self = _.find(this.state.data.player, { \"name\" :\"self\" });\r\n\r\n                if(self !== undefined) {\r\n                  const desc = _.find(this.state.data.text, { \"id\" : self.description });\r\n                  //console.log(self, desc);\r\n                  this.say(desc.text);\r\n                }\r\n              } else {\r\n                //TODO: We need to provide a way to get an object description\r\n                //      here...\r\n\r\n                this.say(\"I don't know what that is.\");\r\n              }\r\n            } else {\r\n              this.say(\"usage: x|examine [something]\");\r\n            }\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: flattenDirectionSynonyms(),\r\n          func: function(player, system, cmd, args) {\r\n            this.go(cmd);\r\n          }.bind(this)\r\n        }\r\n      ];\r\n\r\n      const systemCommands = [\r\n        {\r\n          synonyms: [\"/save\"],\r\n          func: function(cmd, args) {\r\n            //this.say(\"not yet implemented.\");\r\n\r\n            const json = JSON.stringify(this.state.player, null, 2);\r\n            this.say(`<h3>Player Data</h3><pre>${syntaxHighlight(json)}</pre>`);\r\n            this.say(`<h3>Encoded</h3>${btoa(JSON.stringify(this.state.player, null, 2))}`);\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"/restore\"],\r\n          func: function(cmd, args) {\r\n            //this.say(\"not yet implemented.\");\r\n            //console.log(atob(\"ewogICJzY29yZSI6IDAsCiAgInJvb20iOiB7fSwKICAiaW52ZW50b3J5IjogW10KfQ==\"));\r\n\r\n            if(args.length > 0) {\r\n              try {\r\n                let restoredJSON = JSON.parse(atob(args[0]));\r\n                this.say(`<h3>Restored Player Data</h3><pre>${syntaxHighlight(restoredJSON)}</pre>`);\r\n                this.say(\"Restoring player save data.\");\r\n\r\n                // need to check the properties on the player object because we\r\n                // don't want to restore some arbitary JSON object and then overwrite\r\n                // the player object.\r\n\r\n                let canRestore = [];\r\n                const props = [\"score\", \"rooms\", \"inventory\"];\r\n\r\n                props.map((p) => { canRestore.push(true); });\r\n                canRestore = _.find(canRestore, false);\r\n\r\n                if(canRestore === undefined) {\r\n                  canRestore = true;\r\n                }\r\n\r\n                if(canRestore) {\r\n                  this.setState({\r\n                    player: restoredJSON\r\n                  }, function() {\r\n                    this.say(\"Finished restoring player save data.\");\r\n                  }.bind(this));\r\n                } else {\r\n                  this.say(\"I cannot restore this save data.\");\r\n                }\r\n              } catch(e) {\r\n                //console.log(e);\r\n                this.say(\"Sorry I cannot restore your game.\");\r\n              }\r\n            } else {\r\n              this.say(\"usage: /restore [encoded string]\");\r\n            }\r\n\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"/undo\"],\r\n          func: function(cmd, args) {\r\n            this.say(\"not yet implemented.\");\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"/debug\"],\r\n          func: function(cmd, args) {\r\n            let json = \"\";\r\n\r\n            if(args.length > 0 && this.state.data.hasOwnProperty(args[0])) {\r\n              json = JSON.stringify(this.state.data[args[0]], null, 2);\r\n              this.say(`<h3>Game Data - ${args[0]}</h3>`);\r\n            } else {\r\n              json = JSON.stringify(this.state.data, null, 2);\r\n              this.say(\"<h3>Game Data - All</h3>\");\r\n            }\r\n\r\n            this.say(`<pre>${syntaxHighlight(json)}</pre>`);\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"/clear\"],\r\n          func: function(cmd, args) {\r\n            this.clear();\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"/restart\"],\r\n          func: function(cmd, args) {\r\n            this.clear();\r\n            this.startGame();\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"help\",\"h\"],\r\n          func: function(cmd, args) {\r\n            const help = [\r\n              \"<b>/debug [key]</b> - prints the game data object for debugging purposes.\",\r\n              \"<b>/save</b> - prints an encoded string you can use to restore your game.\",\r\n              \"<b>/restore &lt;encoded string&gt;</b> - restores a previous game.\",\r\n              \"<b>/clear</b> - clears the screen\",\r\n              \"<b>/restart</b> - restarts the game\",\r\n              \"<b>h, help</b> - prints this message\",\r\n              \"<b>i, inventory</b> - prints your inventory\",\r\n              \"<b>l, look</b> - prints the description of the current room\",\r\n              \"<b>x, examine &lt;object&gt;</b> - prints a detailed description of an object\",\r\n              \"<b>ex, exits</b> - prints the list of exits for this room\",\r\n              \"<b>n, north, ne, northeast, nw, northwest, s, south, se, southeast, sw, southwest, e, east, w, west</b> - moves the player to a room relative to the direction specified\",\r\n            ];\r\n\r\n            this.say(`<h3>Help:</h3><blockquote>${help.join('<br/>')}</blockquote>`);\r\n          }.bind(this)\r\n        }\r\n      ];\r\n\r\n      this.state = {\r\n        playerCommands: playerCommands,\r\n        systemCommands: systemCommands,\r\n        // minimal player object to satisfy the InfoBar title, room and score\r\n        // properties\r\n        roomName: \"\",\r\n        score: 0\r\n      }\r\n    }\r\n    initializePlayer() {\r\n      return {\r\n        score: 0,\r\n        room: {},\r\n        inventory: [] // <- will contain the cloak\r\n      }\r\n    }\r\n    scrollContentArea() {\r\n      $(\"html, body\").animate({ scrollTop: $(document).height() }, 1000);\r\n    }\r\n    clear() {\r\n      this.state.content.html(\"\");\r\n    }\r\n    printCommand(command) {\r\n      this.state.content.append(\"<h3>&gt;\" + command + \"</h3>\");\r\n    }\r\n    say(text, newLine = true) {\r\n      if(text.length > 0) {\r\n        var spacer = \"\";\r\n        if(newLine) {\r\n          spacer = \"<p/>\";\r\n        }\r\n        this.state.content.append(text + spacer);\r\n        this.scrollContentArea();\r\n      }\r\n    }\r\n    getSynonyms(id) {\r\n      const synonyms = _.find(this.state.data.synonyms, { \"id\": id });\r\n      if(synonyms !== undefined) {\r\n        return synonyms.words;\r\n      } else {\r\n        return [];\r\n      }\r\n    }\r\n    getExits(id) {\r\n      const exits = _.find(this.state.data.exits, { \"id\" : id });\r\n      if(exits !== undefined) {\r\n        return exits.rooms;\r\n      }\r\n    }\r\n    getActions(id) {\r\n      // not implemented yet\r\n    }\r\n    getTriggers(id) {\r\n      // not implemented yet\r\n    }\r\n    getObjects(id) {\r\n      // not implemented yet\r\n    }\r\n    getText(id) {\r\n      const text = _.find(this.state.data.text, { \"id\" : id });\r\n      if(text !== undefined) {\r\n        return text;\r\n      } else {\r\n        return [];\r\n      }\r\n    }\r\n    getRoom(id) {\r\n      const room = _.find(this.state.data.rooms, { \"id\" : id });\r\n\r\n      if(room !== undefined) {\r\n        return {\r\n          id: id,\r\n          name: room.name,\r\n          synonyms: _.uniq(_.flatten(room.synonyms.map((s) => { return this.getSynonyms(s); }))),\r\n          text: room.text.map((t) => { return this.getText(t); }),\r\n          exits: this.getExits(id)\r\n        };\r\n      }\r\n    }\r\n    startGame() {\r\n      const misc = _.find(this.state.data.player, { \"name\": \"misc\" });\r\n      const startingRoom = this.getRoom(misc.startRoom);\r\n\r\n      //console.log(misc);\r\n      //console.log(startingRoom);\r\n\r\n      if(startingRoom !== undefined) {\r\n        let player = this.initializePlayer();\r\n        player.room = startingRoom;\r\n\r\n        this.setState({\r\n          player: player,\r\n          roomName: player.room.name\r\n        }, function() {\r\n          this.say(gameInfo.description);\r\n          this.say(`Author: ${gameInfo.author}<br/>Release Date: ${gameInfo.releaseDate}`);\r\n          this.say(\"---\");\r\n\r\n          this.say(startingRoom.text[0].text);\r\n        }.bind(this));\r\n      }\r\n    }\r\n    getCommand(command) {\r\n      let result = {};\r\n      let foundCommand = false;\r\n      let found = (res) => { result = res; };\r\n      let findIn = (commands, commandType, found) => {\r\n        if(result !== {}) {\r\n          _.forEach(commands, (cmd) => {\r\n            if(_.indexOf(cmd.synonyms, command) > -1) {\r\n              foundCommand = true;\r\n\r\n              found({\r\n                commandType: commandType,\r\n                command: cmd\r\n              });\r\n\r\n              return false;\r\n            }\r\n          });\r\n        }\r\n      };\r\n\r\n      findIn(this.state.systemCommands, \"system\", found);\r\n      findIn(this.state.playerCommands, \"player\", found);\r\n      // findIn(this.state.player.room.actions, \"player\", found)\r\n\r\n      if(!foundCommand) {\r\n        this.say(`I don't understand: ${command}`);\r\n      }\r\n\r\n      return result;\r\n    }\r\n    findAndExecuteTrigger(name) {\r\n      // if(this.state.player.room.triggers !== undefined &&\r\n      //    this.state.player.room.triggers.length > 0) {\r\n      //   var trigger = _.find(this.state.player.room.triggers, function(t) {\r\n      //     return t.name === name;\r\n      //   });\r\n      //\r\n      //   if(trigger !== undefined) {\r\n      //     trigger.func(this.state.player, this);\r\n      //   }\r\n      // }\r\n    }\r\n    go(direction) {\r\n      // The room exits are an array and the following indices correspond to the\r\n      // following directions.\r\n\r\n      // 0: north: [\"north\", \"n\"]\r\n      // 1: northEast: [\"northeast\", \"ne\"]\r\n      // 2: northWest: [\"northwest\", \"nw\"]\r\n      // 3: south: [\"south\", \"s\"]\r\n      // 4: southEast: [\"southeast\", \"se\"]\r\n      // 5: southWest: [\"southwest\", \"sw\"]\r\n      // 6: east: [\"east\", \"e\"]\r\n      // 7: west: [\"west\", \"w\"]\r\n\r\n      var dirName = _.findKey(directionSynonyms, (ds) => {\r\n        return ds.indexOf(direction) > -1;\r\n      });\r\n\r\n      if(dirName !== undefined) {\r\n        //console.log(`Direction: ${dirName}`);\r\n        let index = 0;\r\n\r\n        for(let p in directionSynonyms) {\r\n          if(p === dirName) {\r\n            break;\r\n          }\r\n          index++;\r\n        }\r\n\r\n        //console.log(`index = ${index} | directionSynonyms = ${directionSynonyms[dirName]}`);\r\n\r\n        let newRoom = this.getRoom(this.state.player.room.exits[index]);\r\n\r\n        if(newRoom !== undefined) {\r\n          //console.log(newRoom);\r\n          this.state.player.room = newRoom;\r\n\r\n          this.setState({\r\n            roomName: this.state.player.room.name\r\n          }, () => {\r\n            this.say(\"Entered: \" + newRoom.name);\r\n            this.say(this.state.player.room.text[0].text);\r\n            //this.findAndExecuteTrigger(\"entry\");\r\n          });\r\n        } else {\r\n          this.say(\"I cannot go in that direction.\");\r\n          //this.findAndExecuteTrigger(\"movement\");\r\n        }\r\n      }\r\n    }\r\n    onCommandEntered(command) {\r\n      this.printCommand(command);\r\n\r\n      let split = command.split(\" \");\r\n      let cmd = split[0];\r\n      let args = split.slice(1);\r\n\r\n      const cmdObj = this.getCommand(cmd);\r\n\r\n      if(cmdObj.commandType !== undefined) {\r\n        if(cmdObj.commandType === \"player\") {\r\n          cmdObj.command.func(this.state.player, this.state.systemAPI, cmd, args);\r\n        } else if (cmdObj.commandType === \"system\") {\r\n          cmdObj.command.func(cmd, args);\r\n        }\r\n      }\r\n\r\n      this.scrollContentArea();\r\n    }\r\n    componentDidMount() {\r\n      this.setState({\r\n        content: $(\"#content\"),\r\n        data: this.props.data,\r\n        player: this.initializePlayer(),\r\n        systemAPI: {\r\n          // Just one function here so far, if anything else is needed to be\r\n          // called from the rooms or objects then it'll be put in here.\r\n          say: function(text, newLine) {\r\n           this.say(text, newLine);\r\n          }.bind(this)\r\n        }\r\n      }, function() {\r\n        this.startGame();\r\n      });\r\n    }\r\n    render() {\r\n      const contentStyle = {\r\n        marginTop: \"50px\",\r\n        marginLeft: \"10px\"\r\n      };\r\n\r\n      return (\r\n        <div>\r\n          <InfoBar title={gameInfo.title}\r\n                   room={this.state.roomName}\r\n                   score={this.state.score} />\r\n          <div id=\"content\" style={contentStyle}></div>\r\n          <CommandInput onKeyEnter={this.onCommandEntered} />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  return {\r\n    init: function() {\r\n      let dl = new DataLoader();\r\n\r\n      dl.load(gameInfo.dataFile,\r\n        (status) => { console.log(status); },\r\n        (data) => {\r\n          const dataParts = data.split(\"\\n\\r\");\r\n          //console.log(`Total chunks = ${dataParts.length}`);\r\n\r\n          let gdata = {};\r\n\r\n          _.forEach(dataParts, (dp) => {\r\n            const result = dl.read(dp);\r\n            gdata[result.name] = result.data;\r\n          });\r\n\r\n          // console.log(\"---game data loaded---\");\r\n          // console.log(gdata);\r\n          // console.log(\"----------------------\");\r\n\r\n          ReactDOM.render(<GameUI data={gdata} />, document.getElementById(\"ui\"));\r\n        });\r\n    }\r\n  }\r\n})();\r\n\r\n$(document).ready(function() {\r\n  CloakOfDarkness.init();\r\n});\r\n"]}