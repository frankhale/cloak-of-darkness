{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["// Cloak of Darkness as described here: http://www.firthworks.com/roger/cloak/\r\n//\r\n// Frank Hale <frankhale@gmail.com>\r\n// 30 October 2015\r\n\r\nvar CloakOfDarkness = (function() {\r\n  const GameTitle = \"Cloak of Darkness\";\r\n\r\n  const keys = {\r\n    Enter: 13,\r\n    Up: 38,\r\n    Down: 40\r\n  };\r\n\r\n  const directionSynonyms = {\r\n    north: [\"north\", \"n\"],\r\n    northEast: [\"northeast\", \"ne\"],\r\n    northWest: [\"northwest\", \"nw\"],\r\n    south: [\"south\", \"s\"],\r\n    southEast: [\"southeast\", \"se\"],\r\n    southWest: [\"southwest\", \"sw\"],\r\n    east: [\"east\", \"e\"],\r\n    west: [\"west\", \"w\"]\r\n  };\r\n\r\n  const rooms = [\r\n    {\r\n      id: 0,\r\n      name: \"Opera House Foyer\",\r\n      entryText: \"You are in the Foyer of the Opera House. This room has doors to the south and west, also an unusable exit to the north. The room is quiet and you don't see anyone around.\",\r\n      objects: [],\r\n      triggers: [],\r\n      actions: [],\r\n      adjacentRooms: [\r\n        {\r\n          direction: directionSynonyms.west,\r\n          roomId: 1\r\n        },\r\n        {\r\n          direction: directionSynonyms.south,\r\n          roomId: 2\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 1,\r\n      name: \"Cloak Room\",\r\n      entryText: \"You are in the cloak room and you can see a hook on the wall.\",\r\n      objects: [],\r\n      triggers: [],\r\n      actions: [\r\n        {\r\n          name: \"hang\", // hang up cloak\r\n          synonyms: [\"hang\", \"place\", \"put\"],\r\n          func: function(player, system, cmd, args) {\r\n            if(args[0] === \"cloak\") {\r\n               player.inventory = _.remove(player.inventory, function(i) {\r\n                 return i.name !== \"cloak\";\r\n               });\r\n               system.say(\"You take off your cloak and hang it up on the hook.\");\r\n            }\r\n          }\r\n        }\r\n      ],\r\n      adjacentRooms: [\r\n        {\r\n          direction: directionSynonyms.east,\r\n          roomId: 0\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"Bar\",\r\n      entryText: \"\",\r\n      objects: [],\r\n      triggers: [\r\n        {\r\n          name: \"entry\",\r\n          func: function(player, system) {\r\n            // if the player is not wearing the cloak\r\n            var hasCloak = _.find(player.inventory, function(i) {\r\n              return i.name === \"cloak\";\r\n            });\r\n\r\n            if(hasCloak === undefined && player.won === undefined) {\r\n              system.say(\"The room is lit vibrantly and you notice a message is scratched in sawdust on the floor.\", true);\r\n              player.won = true;\r\n            } else if (player.won === false) {\r\n              system.say(\"You can see the room now and there is nothing special about it. You do notice that there is a mess on the floor but you cannot discern why it's there.\");\r\n            } else {\r\n              system.say(\"You are in the bar and it is extremely dark, you cannot see anything right now. You can't even see if there is a light switch.\", true);\r\n            }\r\n          }\r\n        },\r\n        {\r\n          name: \"movement\",\r\n          func: function(player, system) {\r\n            var hasCloak = _.find(player.inventory, function(i) {\r\n              return i.name === \"cloak\";\r\n            });\r\n\r\n            if(hasCloak !== undefined) {\r\n              player.won = false;\r\n              system.say(\"Your movement has disturbed things within the room and the room is no longer as it was when you first entered.\", true);\r\n            }\r\n          }.bind(this)\r\n        }\r\n      ],\r\n      actions: [\r\n        {\r\n          name: \"message\",\r\n          synonyms: [\"read\"],\r\n          func: function(player, system, cmd, args) {\r\n            var hasCloak = _.find(player.inventory, function(i) {\r\n              return i.name === \"cloak\";\r\n            });\r\n\r\n            if(args[0] === \"message\") {\r\n              if(hasCloak === undefined &&\r\n                 player.won !== undefined &&\r\n                 player.won) {\r\n                system.say(\"The message on the floor reads, YOU WON!\");\r\n              } else if (player.won !== undefined && !player.won) {\r\n                system.say(\"Because you disturbed the room while moving around in the dark you made the message written on the floor impossible to read. I'm sorry but you have lost.\");\r\n              } else {\r\n                system.say(\"You cannot see anything in the room because it's too dark.\");\r\n              }\r\n            }\r\n          }\r\n        }\r\n      ],\r\n      adjacentRooms: [\r\n        {\r\n          direction: directionSynonyms.north,\r\n          roomId: 0\r\n        }\r\n      ]\r\n    },\r\n  ];\r\n\r\n  const objects = [\r\n    {\r\n      name: \"cloak\",\r\n      description: \"A eerily dark velvet cloak\",\r\n      synonyms: [\"cloak\", \"dark cloak\", \"velvet cloak\"],\r\n      examine: function(player, system, args) {\r\n        system.say(this.description, true);\r\n      },\r\n      type: {\r\n        name: \"garment\",\r\n        worn: true,\r\n        description: \"This garment is made of a light absorbing material causing it to cancels available light shedding darkness on objects around you.\"\r\n      }\r\n    }\r\n  ]\r\n\r\n  const initialPlayerInventory = [_.find(objects, { \"name\" : \"cloak\" })];\r\n\r\n  function flattenDirectionSynonyms() {\r\n    var result = [];\r\n\r\n    for(var p in directionSynonyms) {\r\n      if(directionSynonyms.hasOwnProperty(p)) {\r\n        result = result.concat(directionSynonyms[p]);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  class CommandInput extends React.Component {\r\n    constructor() {\r\n      super();\r\n\r\n      this.onCommandInputKeyUp = this.onCommandInputKeyUp.bind(this);\r\n\r\n      this.state = {\r\n        commandIndex: -1,\r\n        commandsEntered: []\r\n      };\r\n    }\r\n    componentDidMount() {\r\n      // Make sure the command input box width is a consistant width based on the\r\n      // width of the window.\r\n      var $commandText = $(\"#commandText\");\r\n\r\n      this.setState({ commandText: $commandText });\r\n\r\n      $commandText.width(window.innerWidth - 50);\r\n\r\n      $(window).resize(function(e) {\r\n        $commandText.width(window.innerWidth - 50);\r\n      });\r\n    }\r\n    onCommandInputKeyUp(e) {\r\n      if(e.which === keys.Up) {\r\n        var commandIndex = (this.state.commandIndex === -1) ?\r\n                            this.state.commandsEntered.length - 1 :\r\n                            --this.state.commandIndex;\r\n\r\n        if(commandIndex < 0) {\r\n          commandIndex = 0;\r\n        }\r\n\r\n        this.setState({ commandIndex: commandIndex}, function() {\r\n          this.state.commandText.val(this.state.commandsEntered[commandIndex]);\r\n        });\r\n\r\n      } else if (e.which === keys.Down) {\r\n\r\n        var commandIndex = (this.state.commandIndex === -1) ? 0 : ++this.state.commandIndex;\r\n\r\n        if(commandIndex > this.state.commandsEntered.length) {\r\n          commandIndex = this.state.commandsEntered.length;\r\n        }\r\n\r\n        this.setState({ commandIndex: commandIndex }, function() {\r\n          this.state.commandText.val(this.state.commandsEntered[commandIndex]);\r\n        });\r\n\r\n      } else if(e.which === keys.Enter) {\r\n\r\n        const textEntered = this.state.commandText.val();\r\n        if(!(textEntered.length > 0)) return;\r\n\r\n        this.state.commandText.val(\"\");\r\n\r\n        this.setState({\r\n          commandsEntered: _.uniq(this.state.commandsEntered.concat([textEntered])),\r\n          commandIndex: -1\r\n        }, function() {\r\n          if(this.props.onKeyEnter !== undefined) {\r\n            this.props.onKeyEnter(textEntered);\r\n          }\r\n        });\r\n      }\r\n    }\r\n    render() {\r\n      const commandContainerStyle = {\r\n        paddingLeft: \"10px\"\r\n      };\r\n\r\n      const textInputStyle = {\r\n        border: \"none\",\r\n        outline: \"none\",\r\n        paddingLeft: \"2px\"\r\n      };\r\n\r\n      return (\r\n        React.createElement(\"div\", {id: \"commandContainer\", style: commandContainerStyle}, \n          \">\", React.createElement(\"input\", {id: \"commandText\", style: textInputStyle, type: \"text\", onKeyUp: this.onCommandInputKeyUp})\r\n        )\r\n      );\r\n    }\r\n  }\r\n\r\n  class InfoBar extends React.Component {\r\n    render() {\r\n      const infoStyle = {\r\n        backgroundColor: \"#000\",\r\n        position: \"fixed\",\r\n        top: \"0\",\r\n        width: \"100%\",\r\n        paddingLeft: \"10px\"\r\n      };\r\n\r\n      const titleStyle = {\r\n        backgroundColor: \"#000\",\r\n        color: \"#fff\",\r\n        marginBottom: \"25px\"\r\n      };\r\n\r\n      const roomStyle = {\r\n        backgroundColor: \"#000\",\r\n        color: \"#fff\",\r\n      };\r\n\r\n      const scoreStyle = {\r\n        backgroundColor: \"#000\",\r\n        color: \"#fff\",\r\n        right: \"20px\",\r\n        position: \"absolute\"\r\n      };\r\n\r\n      var separator = \"\";\r\n      if((this.props.title !== undefined && this.props.title.length > 0) &&\r\n         (this.props.room !== undefined && this.props.room.length > 0)) {\r\n           separator = \" | \";\r\n         }\r\n\r\n      return (\r\n        React.createElement(\"div\", {id: \"info\", style: infoStyle}, \r\n          React.createElement(\"span\", {id: \"title\", style: titleStyle}, this.props.title, \" \", separator), \r\n          React.createElement(\"span\", {id: \"room\", style: roomStyle}, this.props.room), \r\n          React.createElement(\"span\", {id: \"score\", style: scoreStyle}, this.props.score)\r\n        )\r\n      );\r\n    }\r\n  }\r\n\r\n  class GameUI extends React.Component {\r\n    constructor() {\r\n      super();\r\n      this.onCommandEntered = this.onCommandEntered.bind(this);\r\n\r\n      var playerCommands = [\r\n        {\r\n          synonyms: [\"exits\", \"ex\"],\r\n          func: function(player, system, cmd, args) {\r\n            var exits = [];\r\n            _.forEach(_.pluck(player.room.adjacentRooms, \"direction\"), function(d) {\r\n              exits.push(_.first(d));\r\n            });\r\n\r\n            if(exits.length > 0) {\r\n              this.say(`the following exits are available: ${exits.join(', ')}`, true);\r\n            }\r\n\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"inventory\", \"i\"],\r\n          func: function(player, system, cmd, args) {\r\n            if(player.inventory.length > 0) {\r\n              _.forEach(player.inventory, function(i) {\r\n                var modifier = \"\";\r\n\r\n                if(i.type.name === \"garment\") {\r\n                  if(i.type.worn) {\r\n                    modifier = \"is\";\r\n                  } else {\r\n                    modifier = \"is not\";\r\n                  }\r\n\r\n                  this.say(i.name + \" (which \" + modifier + \" being worn)\", true);\r\n                } else {\r\n                  this.say(i.name);\r\n                }\r\n              }.bind(this));\r\n            } else {\r\n              this.say(\"Your inventory contains no items.<br/>\");\r\n            }\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"look\", \"l\"],\r\n          func: function(player, system, cmd, args) {\r\n            if(player.room !== {} &&\r\n               player.room.entryText.length > 0) {\r\n              this.say(player.room.entryText, true);\r\n            }\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"examine\", \"x\"],\r\n          func: function(player, system, cmd, args) {\r\n            if(args.length > 0) {\r\n              var obj = _.find(player.inventory, function(i) {\r\n                return i.name === args[0];\r\n              })\r\n\r\n              if(obj !== undefined) {\r\n                obj.examine(player, system, args);\r\n              } else {\r\n                this.say(\"I cannot examine that object.\");\r\n              }\r\n            }\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: flattenDirectionSynonyms(),\r\n          func: function(player, system, cmd, args) {\r\n            //this.say(`go: ${cmd}`, true);\r\n            this.go(cmd);\r\n          }.bind(this)\r\n        }\r\n      ];\r\n\r\n      var systemCommands = [\r\n        {\r\n          synonyms: [\"/clear\"],\r\n          func: function(cmd, args) {\r\n            this.clear();\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"/restart\"],\r\n          func: function(cmd, args) {\r\n            this.clear();\r\n            this.startGame();\r\n          }.bind(this)\r\n        },\r\n        {\r\n          synonyms: [\"help\",\"h\"],\r\n          func: function(cmd, args) {\r\n            var help = [\r\n              \"<b>/clear</b> - clears the screen\",\r\n              \"<b>/restart</b> - restarts the game\",\r\n              \"<b>h, help</b> - prints this message\",\r\n              \"<b>i, inventory</b> - prints your inventory\",\r\n              \"<b>l, look</b> - prints the description of the current room\",\r\n              \"<b>x, examine</b> - prints a detailed description of an object\",\r\n              \"<b>ex, exits</b> - prints the list of exits for this room\",\r\n              \"<b>n, north, ne, northeast, nw, northwest, s, south, se, southeast, sw, southwest, e, east, w, west</b> - moves the player to a room relative to the direction specified\",\r\n            ];\r\n\r\n            this.say(\"<blockquote>\" + help.join(\"<br/>\") + \"</blockquote>\");\r\n          }.bind(this)\r\n        }\r\n      ];\r\n\r\n      this.state = {\r\n        rooms: rooms,\r\n        objects: [],\r\n        playerCommands: playerCommands,\r\n        systemCommands: systemCommands,\r\n        // minimal player object to satisfy the InfoBar title, room and score\r\n        // properties\r\n        player: {\r\n          room: {\r\n            name: \"\"\r\n          },\r\n          score: \"\" // this will be changed later\r\n        }\r\n      }\r\n    }\r\n    initializePlayer() {\r\n      return {\r\n        score: \"\", // this will be changed later\r\n        room: {},\r\n        inventory: initialPlayerInventory\r\n      }\r\n    }\r\n    scrollContentArea() {\r\n      $(\"html, body\").animate({ scrollTop: $(document).height() }, 1000);\r\n    }\r\n    clear() {\r\n      this.state.content.html(\"\");\r\n    }\r\n    printCommand(command) {\r\n      this.state.content.append(\"<h3>&gt;\" + command + \"</h3>\");\r\n    }\r\n    say(text, newLine) {\r\n      if(text.length > 0) {\r\n        var spacer = \"\";\r\n        if(newLine) {\r\n          spacer = \"<p/>\";\r\n        }\r\n        this.state.content.append(text + spacer);\r\n        this.scrollContentArea();\r\n      }\r\n    }\r\n    startGame() {\r\n      var firstRoom = _.findWhere(rooms, { \"id\": 0 });\r\n\r\n      if(firstRoom !== undefined) {\r\n        var player = this.initializePlayer();\r\n        player.room = firstRoom;\r\n\r\n        this.setState({ player: player }, function() {\r\n          this.say(player.room.entryText, true);\r\n        }.bind(this));\r\n      }\r\n    }\r\n    getCommand(command, found) {\r\n      var result = {};\r\n\r\n      var findIn = function(commands, commandType, found) {\r\n        if(result !== {}) {\r\n          _.forEach(commands, function(cmd) {\r\n            if(_.indexOf(cmd.synonyms, command) > -1) {\r\n              found({\r\n                commandType: commandType,\r\n                command: cmd\r\n              });\r\n\r\n              return false;\r\n            }\r\n          });\r\n        }\r\n      };\r\n\r\n      var found = function(res) {\r\n        result = res;\r\n      };\r\n\r\n      findIn(this.state.playerCommands, \"player\", found);\r\n      findIn(this.state.player.room.actions, \"player\", found)\r\n      findIn(this.state.systemCommands, \"system\", found);\r\n\r\n      return result;\r\n    }\r\n    findAndExecuteTrigger(name) {\r\n      if(this.state.player.room.triggers !== undefined &&\r\n         this.state.player.room.triggers.length > 0) {\r\n        var trigger = _.find(this.state.player.room.triggers, function(t) {\r\n          return t.name === name;\r\n        });\r\n\r\n        if(trigger !== undefined) {\r\n          trigger.func(this.state.player, this);\r\n        }\r\n      }\r\n    }\r\n    go(direction) {\r\n      var adjacentRoom = _.filter(this.state.player.room.adjacentRooms, function(r) {\r\n        return _.indexOf(r.direction, direction) > -1;\r\n      });\r\n\r\n      if(adjacentRoom.length > 0) {\r\n        var room = _.find(this.state.rooms, { \"id\": adjacentRoom[0].roomId });\r\n\r\n        if(room !== undefined) {\r\n          this.say(\"entered: \" + room.name, true);\r\n\r\n          this.state.player.room = room;\r\n\r\n          this.forceUpdate();\r\n\r\n          if(this.state.player.room.entryText !== \"\") {\r\n            this.say(this.state.player.room.entryText, true);\r\n          }\r\n\r\n          this.findAndExecuteTrigger(\"entry\");\r\n        }\r\n      } else {\r\n         this.say(\"You cannot go in that direction.\", true);\r\n         this.findAndExecuteTrigger(\"movement\");\r\n      }\r\n    }\r\n    onCommandEntered(command) {\r\n      this.printCommand(command);\r\n\r\n      var split = command.split(\" \");\r\n      var cmd = split[0];\r\n      var args = split.slice(1);\r\n\r\n      var cmdObj = this.getCommand(cmd);\r\n\r\n      if(cmdObj.commandType !== undefined) {\r\n        if(cmdObj.commandType === \"player\") {\r\n          cmdObj.command.func(this.state.player, this, cmd, args);\r\n        } else if (cmdObj.commandType === \"system\") {\r\n          cmdObj.command.func(cmd, args);\r\n        }\r\n      }\r\n\r\n      this.scrollContentArea();\r\n    }\r\n    componentDidMount() {\r\n      this.setState({\r\n        content: $(\"#content\"),\r\n        player: this.initializePlayer()\r\n      }, function() {\r\n        this.startGame();\r\n      });\r\n    }\r\n    render() {\r\n      const contentStyle = {\r\n        marginTop: \"50px\",\r\n        padding: \"10px\"\r\n      };\r\n\r\n      return (\r\n        React.createElement(\"div\", null, \r\n          React.createElement(InfoBar, {title: GameTitle, \r\n                   room: this.state.player.room.name, \r\n                   score: this.state.player.score}), \r\n          React.createElement(\"div\", {id: \"content\", style: contentStyle}), \r\n          React.createElement(CommandInput, {onKeyEnter: this.onCommandEntered})\r\n        )\r\n      );\r\n    }\r\n  }\r\n\r\n  return {\r\n    init: function() {\r\n      ReactDOM.render(React.createElement(GameUI, null), document.getElementById(\"ui\"));\r\n    }\r\n  }\r\n})();\r\n\r\n$(document).ready(function() {\r\n  CloakOfDarkness.init();\r\n});\r\n"]}